<!-- Wesley Café Calazans | @wesleyclzns -->
<!-- V 0.1 -->


<!DOCTYPE html>
<html lang="pt-BR"> 
<head>
<meta charset="utf-8">
<title>geoMetrica </title>
<meta name="viewport" content="initial-scale=1,maximum-scale=1,user-scalable=no">
<link rel="shortcut icon" href="./assets/img/favicon-beta.svg" type="image/x-icon">

<!-- IMPORTAÇÕES MAPBOX -->

<!-- MAPBOX GL -->
<link href="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.css" rel="stylesheet">
<script src="https://api.mapbox.com/mapbox-gl-js/v2.6.0/mapbox-gl.js"></script>

<!-- GEOCODER -->
<script src="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.min.js"></script>
<link rel="stylesheet" href="https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.7.2/mapbox-gl-geocoder.css" type="text/css">
 


<style>
    body { margin: 0; padding: 0; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }

    nav{
    position: absolute;
    z-index: 1;
    width: 50%;
    left: 50;
    margin-left: -25%;
    top: 10px;
    }

    .geocoder {
    position: absolute;
    z-index: 1;
    width: 50%;
    left: 50%;
    margin-left: -25%;
    top: 10px;
    border: red 2px solid;
    }
    .mapboxgl-ctrl-geocoder {
    min-width: 100%;
    
    }
    #map {
    margin-top: 75px;
    }
</style>

</head>

<body>
    <header>
       <!--  <a class=style="color: white; text-decoration: none;">
            <span style="font-size: 20px; font-weight: 500;">GEOMETRICA</span>
            <span style="color: #333333; text-transform: uppercase; margin-left: 8px; color: white; text-align: left; font-weight: 50; font-size: 12px">Alpha Version | 0.1</span>
        </a>
        <nav><ul><li><a href="http://">Test</a></li></ul></nav> -->
    </header>
    
    <section class="mapbox-viewport">

        
        <div id="geocoder" class="geocoder"></div>
        <div id="map">
            <!-- <script src="./assets/js/mapbox.js"></script> -->
        </div>
            
            <script>
               	mapboxgl.accessToken = 'pk.eyJ1IjoiZ2VvbWV0cmljYSIsImEiOiJja3dhcXF3bzAybXY4MnVuaDRjcjVxMGVuIn0.6Xlyyt98tPZx0S-OVeLx_w';
                const map = new mapboxgl.Map({
                container: 'map',
                style: 'mapbox://styles/geometrica/ckwas45dm0kd814t8q3w7dndv',
                center: [-46.616975, -23.554425],
                minZoom: 2,
                zoom: 14.60
});

                // Add zoom and rotation controls to the map.
                map.addControl(new mapboxgl.NavigationControl());

                // Add the control to the map.
                const geocoder = new MapboxGeocoder({
                accessToken: mapboxgl.accessToken,
                mapboxgl: mapboxgl
                });
                
                document.getElementById('geocoder').appendChild(geocoder.onAdd(map));

                map.on('load', () => {
                    // Insert the layer beneath any symbol layer.
                    const layers = map.getStyle().layers;
                    const labelLayerId = layers.find(
                        (layer) => layer.type === 'symbol' && layer.layout['text-field']
                    ).id;
                    

                    map.on('click', (e) => {
                    // Set `bbox` as 5px reactangle area around clicked point.
                    const bbox = [
                    [e.point.x - 5, e.point.y - 5],
                    [e.point.x + 5, e.point.y + 5]
                    ];
                    // Find features intersecting the bounding box.
                    const selectedFeatures = map.queryRenderedFeatures(bbox, {
                    layers: ['counties']
                    });
                    const fips = selectedFeatures.map(
                    (feature) => feature.properties.FIPS
                    );
                    // Set a filter matching selected features by FIPS codes
                    // to activate the 'counties-highlighted' layer.
                    map.setFilter('counties-highlighted', ['in', 'FIPS', ...fips]);
                    });
                  
                });
            </script>
    </section>
    <footer>

    </footer>
</body>
</html>